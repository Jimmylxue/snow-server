## 用户相关

### 用户表

```ts
@Entity('user', { schema: 'snow-server', comment: '用户表' })
export class User {
  @PrimaryGeneratedColumn({ type: 'int', name: 'id', comment: '用户id' })
  id: number;

  @Column('varchar', {
    name: 'username',
    length: 45,
    nullable: true,
    comment: '用户名',
  })
  username: string;

  @Column({
    type: 'enum',
    enum: Role,
    default: Role.学生,
    name: 'role',
  })
  role: number;

  @Column({
    type: 'enum',
    enum: Sex,
    default: Sex.未知,
    name: 'sex',
  })
  sex: number;

  @Column('varchar', {
    name: 'phone',
    length: 45,
    nullable: true,
  })
  phone: string;

  @Column('varchar', { name: 'createTime', length: 45 })
  createTime: string;

  @Column('varchar', {
    name: 'password',
    length: 200,
    nullable: false,
    comment: '密码',
  })
  password: string;

  @Column('varchar', {
    name: 'exam_year',
    length: 45,
    nullable: true,
    comment: '考研年份',
  })
  exam_year: string;

  @Column('int', { name: 'exam_count', comment: '考试次数', nullable: true })
  exam_count: number;
}
```

## 评论区相关

### 帖子表

``` ts
@Entity('clubPosts', { schema: 'snow-server' })
export class ClubPosts {
  @PrimaryGeneratedColumn({
    type: 'int',
    name: 'id',
    comment: '帖子id',
  })
  id: number;

  @Column({ type: 'int', name: 'clubId', comment: '绑定 - 基础阶段或者强化阶段id' })
  clubId: number;

  @Column({ type: 'int', name: 'userId' })
  userId: number;

  @ManyToOne(() => User)
  @JoinColumn({ comment: '外键' })
  user: number;

  @Column('text', { name: 'title', nullable: true, comment: '帖子标题' })
  title: string;

  @Column('text', { name: 'content', nullable: true, comment: '帖子内容' })
  content: string;

  @CreateDateColumn({ comment: '创建时间', type: 'timestamp' })
  createdTime: Date;

  @UpdateDateColumn({ comment: '更新时间', type: 'timestamp' })
  updateTime: Date;
}
```

### 帖子评论表

```ts
@Entity('clubPostComment', { schema: 'snow-server' })
export class ClubPostComment {
  @PrimaryGeneratedColumn({
    type: 'int',
    name: 'commentId',
    comment: '帖子评论id',
  })
  commentId: number;

  @Column({ type: 'int', name: 'clubPostsId', comment: '绑定帖子id' })
  clubPostsId: number;

  @ManyToOne(() => ClubPosts, (ClubPosts) => ClubPosts.id, {
    onDelete: 'CASCADE',
  })
  @JoinColumn({ comment: '外键' })
  clubPosts: any;

  @Column({ type: 'int', name: 'userId' })
  userId: number;

  /**
   * 评论参与者的 - userId
   */
  @ManyToOne(() => User)
  @JoinColumn({ comment:'外键' })
  user: any;

  @Column('text', { name: 'desc', nullable: true, comment: '评论内容' })
  content: string;

  @CreateDateColumn({ comment: '创建时间', type: 'timestamp' })
  createdTime: Date;

  @UpdateDateColumn({ comment: '更新时间', type: 'timestamp' })
  updateTime: Date;
}
```

### 帖子点赞表

```ts
@Entity('clubPostLike', { schema: 'snow-server' })
export class ClubPostLove {
  @PrimaryGeneratedColumn({
    type: 'int',
    name: 'id',
    comment: '帖子点赞id',
  })
  id: number;

  @Column({ type: 'int', name: 'clubPostsId', comment: '评论id' })
  clubPostsId: number;

  @ManyToOne(() => ClubPosts, (ClubPosts) => ClubPosts.id, {
    onDelete: 'CASCADE',
  })
  @JoinColumn({ comment: '外键' })
  clubPosts: any;

  @Column({ type: 'int', name: 'userId' })
  userId: number;

  /**
   * 评论参与者的 - userId
   */
  @ManyToOne(() => User)
  @JoinColumn()
  user: any;

  @CreateDateColumn({ comment: '创建时间', type: 'timestamp' })
  createdTime: Date;

  @UpdateDateColumn({ comment: '更新时间', type: 'timestamp' })
  updateTime: Date;
}
```

## 考研相关

### 学科表

```ts
@Entity('questionType', { schema: 'snow-server' })
export class QuestionType {
  @PrimaryGeneratedColumn({
    type: 'int',
    name: 'examTypeId',
    comment: '学科类型id',
  })
  id: number;

  @Column('varchar', { name: 'name', length: 45, comment: '学科名' })
  name: string;

  @Column('text', { name: 'desc', nullable: true, comment: '学科描述' })
  desc: string;

  @CreateDateColumn({ comment: '创建时间', type: 'timestamp' })
  createdTime: Date;

  @UpdateDateColumn({ comment: '更新时间', type: 'timestamp' })
  updateTime: Date;
}
```

### 学科题目表

> 对应考研模块题目集

```ts
@Entity('question', { schema: 'snow-server' })
export class Question {
  @PrimaryGeneratedColumn({ type: 'int', name: 'id', comment: '题目id' })
  id: number;

  @Column('varchar', { name: 'name', length: 45, comment: '题目标题' })
  name: string;

  @Column('text', { name: 'desc', nullable: true, comment: '题目意义' })
  desc: string;

  @Column({
    type: 'enum',
    enum: EExamType,
    name: 'examType',
    comment: '题目的考核类型 - 枚举类型 - 有选择题 判断题',
    default: EExamType.选择题,
  })
  examType: EExamType;

  @Column({ type: 'int', name: 'typeId', comment: '题目所属的科目' })
  typeId: number;
 
  @ManyToOne(() => QuestionType, (questionType) => questionType.id, {
    onDelete: 'CASCADE',
  })
  @JoinColumn({ name: 'typeId',comment: '外键' })
  type: any;

  @Column('text', { name: 'option', nullable: true, comment: '题目的选项内容' })
  option: string;

  @Column('varchar', { name: 'answer', length: 45, comment: '题目答案' })
  answer: string;

  @CreateDateColumn({ comment: '创建时间', type: 'timestamp' })
  createdTime: Date;

  @UpdateDateColumn({ comment: '更新时间', type: 'timestamp' })
  updateTime: Date;
}
```

### 考研刷题记录表

```ts
@Entity('questionTestRecord', { schema: 'snow-server' })
export class QuestionTestRecord {
  @PrimaryGeneratedColumn({ type: 'int', name: 'id', comment: '考研记录id' })
  id: number;

  @Column('int', { name: 'userId', comment: '用户id' })
  userId: number;

  @ManyToOne(() => User, (user) => user.id, {
    onDelete: 'CASCADE',
  })
  @JoinColumn({ name: 'userId', comment: '外键' })
  user: number;

  @Column('int', { name: 'questionTypeId', comment: '科目类型id' })
  questionTypeId: number;

  @ManyToOne(() => QuestionType, (questionType) => questionType.id, {
    onDelete: 'CASCADE',
  })
  @JoinColumn({ name: 'questionTypeId', comment: '外键' })
  questionType: number;

  @Column('int', { name: 'score', comment: '考试得分' })
  score: number;

  @CreateDateColumn({ comment: '创建时间', type: 'timestamp' })
  createdTime: Date;

  @UpdateDateColumn({ comment: '更新时间', type: 'timestamp' })
  updateTime: Date;
}
```

## 自习相关

### 自习室表

```ts
@Entity('studyRoom', { schema: 'snow-server' })
export class StudyRoom {
  @PrimaryGeneratedColumn({ type: 'int', name: 'id', comment: '学习室id' })
  id: number;

  @Column({
    type: 'enum',
    enum: EStudyRoomType,
    name: 'studyRoomType',
    comment: '学习室类型, 有自由自习的类型 和 统一自习室类型',
    default: EStudyRoomType.自由自习模式,
  })
  studyRoomType: EStudyRoomType;

  /**
   * 学习室最大人数
   */
  @Column('int', { name: 'max', comment: '学习室最大人数' })
  max: number;

  /**
   * 学习室开放时间
   */
  @Column('int', { name: 'openTime', comment: '学习室开放时间' })
  openTime: number;

  /**
   * 学习室关闭时间
   */
  @Column('int', { name: 'closeTime', comment: '学习室关闭时间' })
  closeTime: number;

  /**
   * 学习室描述
   */
  @Column('text', { name: 'desc', comment: '学习室描述' })
  desc: string;

  @CreateDateColumn({ comment: '创建时间', type: 'timestamp' })
  createdTime: Date;

  @UpdateDateColumn({ comment: '更新时间', type: 'timestamp' })
  updateTime: Date;
}
```

### 自习室学习记录表

```ts
@Entity('studyRecord', { schema: 'snow-server' })
export class StudyRoom {
  @PrimaryGeneratedColumn({ type: 'int', name: 'id', comment: '学习室id' })
  id: number;

  @Column('int', { name: 'userId', comment: '用户id' })
  userId: number;

  @ManyToOne(() => User, (user) => user.id, {
    onDelete: 'CASCADE',
  })
  @JoinColumn({ name: 'userId', 外检 })
  user: number;

  /**
   * 学习开始时间
   */
  @Column('int', { name: 'studyTime', comment: '学习时间' })
  studyTime: number;

  /**
   * 学习结束时间
   */
  @Column('int', { name: 'endTime', comment: '学习结束时间' })
  endTime: number;

  @CreateDateColumn({ comment: '创建时间', type: 'timestamp' })
  createdTime: Date;

  @UpdateDateColumn({ comment: '更新时间', type: 'timestamp' })
  updateTime: Date;
}
```

## 考试

### 考试记录表

```ts
@Entity('examRecord', { schema: 'snow-server' })
export class ExamRecord {
  @PrimaryGeneratedColumn({ type: 'int', name: 'id', comment: '考试记录id' })
  id: number;

  @Column('int', { name: 'userId', comment: '用户id' })
  userId: number;

  @ManyToOne(() => User, (user) => user.id, {
    onDelete: 'CASCADE',
  })
  @JoinColumn({ name: 'userId', comment: '外键' })
  user: number;

  @Column({
    type: 'int',
    name: 'examType',
    default: EExamProjectType.数学,
    comment: '考试科目类型，有数学、英语、政治',
  })
  examType: number;

  @Column('text', { name: 'desc', comment: '考试心得' })
  desc: string;

  @Column('int', { name: 'useTime', comment: '考试用时' })
  useTime: number;

  @Column('int', { name: 'remainTime', comment: '剩余时间' })
  remainTime: number;

  @Column('int', { name: 'overTime', comment: '考试超时时间' })
  overTime: number;

  @CreateDateColumn({ comment: '创建时间', type: 'timestamp' })
  createdTime: Date;

  @UpdateDateColumn({ comment: '更新时间', type: 'timestamp' })
  updateTime: Date;
}
```

